<div class="user-list-container">
  <div class="header">
    <h2>Users</h2>
    <button class="btn btn-primary" (click)="showCreateForm.set(!showCreateForm())">
      {{ showCreateForm() ? 'Cancel' : 'Add User' }}
    </button>
  </div>

  @if (showCreateForm()) {
    <div class="create-form">
      <h3>Create New User</h3>
      <form (ngSubmit)="createUser()">
        <div class="form-group">
          <label for="name">Name *</label>
          <input 
            type="text" 
            id="name" 
            [(ngModel)]="newUser().name" 
            name="name"
            required>
        </div>
        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="newUser().email" 
            name="email"
            required>
        </div>
        <div class="form-group">
          <label for="location">Location</label>
          <input 
            type="text" 
            id="location" 
            [(ngModel)]="newUser().location" 
            name="location">
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-success">Create User</button>
          <button type="button" class="btn btn-secondary" (click)="resetForm()">Cancel</button>
        </div>
      </form>
    </div>
  }

  <div class="users-grid">
    @for (user of users(); track user.id) {
      <div class="user-card">
        <h3>{{ user.name }}</h3>
        <p class="email">{{ user.email }}</p>
        @if (user.location) {
          <p class="location">üìç {{ user.location }}</p>
        }
        <div class="actions">
          <a [routerLink]="['/users', user.id]" class="btn btn-outline">View Profile</a>
          <a [routerLink]="['/matches', user.id]" class="btn btn-outline">Find Matches</a>
        </div>
      </div>
    } @empty {
      <p class="no-users">No users found. Create the first user!</p>
    }
  </div>
</div>